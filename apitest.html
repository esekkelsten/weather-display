<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API-test</title>
    <style>
        #weatherIcon {
            width: 50px;
        }
    </style>
</head>
<body>
    <h1 id="temp">N/A</h1>
    <img id="weatherIcon" src="" style="display: none;">

    
    <script>
         // Direct from API
        const getWeather = async () => {
            const url = "https://api.met.no/weatherapi/nowcast/2.0/complete?lat=59.90&lon=10.81"; // Location: NHV25
            const userAgent = "Weather-Display erlend.sekkelsten@gmail.com";
            const response = await fetch(url, {headers: {"User-Agent": userAgent}});
            return await response.json();
        }

        (async () => {
            try {
                const newWeatherData = await getWeather();
                console.log(newWeatherData);
                localStorage.setItem("savedWeatherData", JSON.stringify(newWeatherData));

                let savedWeatherData = localStorage.getItem("savedWeatherData");
                console.log(JSON.parse(savedWeatherData));
            } catch (error) {
                console.log("Error");
            }
        })(); 
               
        /*  //Local Storage

        */
        // console.log(weatherData);
        
    </script>
</body>
</html>